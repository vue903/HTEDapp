(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-nodePage-buyNode"],{"0364":function(t,e,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("d4b5"),n("c9b5"),n("bf0f"),n("ab80"),n("e966");var a=i(n("2634")),o=i(n("2fdc")),s=i(n("a7bf")),r=i(n("1dd0")),c=i(n("8783")),u=(i(n("e271")),i(n("0a6b"))),d=n("08dd"),f=i(n("f1c9")),l={components:{wLoading:f.default,back:r.default,footerBox:u.default},data:function(){return{myAddress:"",pageType:1,Approve:!1}},onLoad:function(t){var e=this;this.pageType=t.type,this.userAddress=void 0==t.userAddress?"":t.userAddress;var n=this;n.Init((function(){uni.setStorageSync("address",e.myAddress);var t=new n.ethers.providers.Web3Provider(window.ethereum);n.contract=new n.ethers.Contract(n.contractAddress,c.default,t.getSigner()),n.Fallowance()}))},methods:{clickBuy:function(){var t=this;return(0,o.default)((0,a.default)().mark((function e(){var n,i;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.loading.open(),n=1==t.pageType?0:1,e.next=4,t.contract.buyValid(n).catch((function(e){t.$refs.loading.close();var n=JSON.parse(JSON.stringify(e));uni.showToast({title:n.reason,icon:"none"})}));case 4:if(i=e.sent,!i){e.next=21;break}return e.prev=6,e.next=9,i.wait();case 9:t.$refs.loading.close(),uni.showToast({title:t.$t("success"),icon:"none"}),t.inBindTop(),t.$refs.popup.close(),e.next=21;break;case 15:e.prev=15,e.t0=e["catch"](6),console.log(e.t0),t.$refs.loading.close(),t.$refs.popup.close(),uni.showToast({title:e.t0.toString(),icon:"none"});case 21:case"end":return e.stop()}}),e,null,[[6,15]])})))()},Fallowance:function(){var t=this;(0,d.allowance)(this.myAddress,this.contractAddress).then((function(e){if(e){var n=(0,d.mobileFilter)(e);t.allowanceB=n,parseInt(n)<=parseInt(0)?t.Approve=!1:t.Approve=!0}}))},FApprove:function(){var t=this;return(0,o.default)((0,a.default)().mark((function e(){var n;return(0,a.default)().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$refs.loading.open(),e.next=3,(0,d.usdtApprove)(t.contractAddress).catch((function(e){t.$refs.loading.close();var n=JSON.parse(JSON.stringify(e));(0,s.default)({title:"失败",text:n.reason,icon:"error"})}));case 3:if(n=e.sent,!n){e.next=12;break}return e.next=7,n.wait();case 7:t.$refs.loading.close(),t.Fallowance(),(0,s.default)({title:t.$t("success"),icon:"success"}),e.next=13;break;case 12:t.$refs.loading.close();case 13:case"end":return e.stop()}}),e)})))()},goBack:function(){uni.navigateBack()},Init:function(t){var e=this;return(0,o.default)((0,a.default)().mark((function n(){var i,o;return(0,a.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if("undefined"!==typeof window.ethereum){n.next=4;break}console.log("请安装MetaMask"),n.next=10;break;case 4:return i=new e.ethers.providers.Web3Provider(window.ethereum),n.next=7,i.send("eth_requestAccounts",[]);case 7:o=n.sent,e.myAddress=o[0],t();case 10:case"end":return n.stop()}}),n)})))()}}};e.default=l},"0a6b":function(t,e,n){"use strict";n.r(e);var i=n("c58c"),a=n("ed00");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("30e6");var s=n("828b"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"20be2fde",null,!1,i["a"],void 0);e["default"]=r.exports},"1ef1":function(t,e,n){var i=n("c86c"),a=n("2ec5"),o=n("d1eb");e=i(!1);var s=a(o);e.push([t.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.footer-info[data-v-20be2fde]{padding:%?65?% %?95?% %?160?% %?95?%;background-image:url('+s+");background-size:100% 100%}.footer-info .left[data-v-20be2fde]{width:%?150?%;height:%?71?%}.footer-info .rightList[data-v-20be2fde]{display:flex;align-items:center}.footer-info .rightList uni-image[data-v-20be2fde]{width:%?560?%;height:%?48?%;margin-right:%?45?%}.footer-info .listBox[data-v-20be2fde]{width:100%;display:flex;justify-content:center;margin-top:%?46?%}.footer-info .listBox .urlList[data-v-20be2fde]{width:70%;display:flex;justify-content:space-between;align-items:center}.footer-info .listBox .urlList uni-image[data-v-20be2fde]{width:%?70?%;height:%?70?%}",""]),t.exports=e},"1f5b":function(t,e,n){"use strict";n.r(e);var i=n("0364"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},"2ec5":function(t,e,n){"use strict";t.exports=function(t,e){return e||(e={}),t=t&&t.__esModule?t.default:t,"string"!==typeof t?t:(/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t)}},"30e6":function(t,e,n){"use strict";var i=n("f4e6"),a=n.n(i);a.a},a639:function(t,e,n){var i=n("fd12");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("967d").default;a("48e97d59",i,!0,{sourceMap:!1,shadowMode:!1})},b4a4:function(t,e,n){"use strict";n("6a54"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;e.default={name:"Children",props:{},methods:{}}},bd02:function(t,e,n){"use strict";var i=n("a639"),a=n.n(i);a.a},c58c:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this.$createElement,e=this._self._c||t;return e("v-uni-view",{staticClass:"footer-info"},[e("v-uni-view",{staticClass:"rightList"},[e("v-uni-image",{staticClass:"left",attrs:{src:n("f723"),mode:""}})],1),e("v-uni-view",{staticClass:"listBox"},[e("v-uni-view",{staticClass:"urlList"},[e("v-uni-image",{attrs:{src:"/static/foot1.png",mode:""}}),e("v-uni-image",{attrs:{src:"/static/foot2.png",mode:""}}),e("v-uni-image",{attrs:{src:"/static/foot3.png",mode:""}}),e("v-uni-image",{attrs:{src:"/static/foot4.png",mode:""}})],1)],1)],1)},a=[]},d1eb:function(t,e,n){t.exports=n.p+"static/footerBg.png"},ed00:function(t,e,n){"use strict";n.r(e);var i=n("b4a4"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},ee01:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[n("back",{ref:"child",attrs:{text:t.myAddress,type:"true",classType:"true",subheading:"true"},on:{getMsg:function(e){arguments[0]=e=t.$handleEvent(e),t.getMsg.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"buyNodeBox"},[n("v-uni-view",{staticClass:"withTitle"},[n("v-uni-text"),n("v-uni-text",[t._v(t._s(1==t.pageType?t.$t("node15"):t.$t("node16")))]),n("v-uni-image",{attrs:{src:"/static/close.png",mode:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.goBack.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"buyBox"},[n("v-uni-view",{staticClass:"inputBox"},[n("v-uni-text",[t._v(t._s(t.$t("node17"))+"：")]),n("v-uni-image",{attrs:{src:"/static/USDT.png",mode:""}}),n("v-uni-text",[t._v("100%USDT")])],1),n("v-uni-view",{staticClass:"inputBox",staticStyle:{"margin-top":"77rpx"}},[n("v-uni-image",{attrs:{src:"/static/USDT.png",mode:""}}),n("v-uni-text",[t._v(t._s(1==t.pageType?"500":"1000")+" USDT")])],1),n("v-uni-view",{staticClass:"tips"},[t._v(t._s(t.$t("node18"))+"：0 USDT")]),n("v-uni-view",{staticClass:"tipsList"},[n("v-uni-view",{staticClass:"oneText"},[t._v("1."+t._s(t.$t("node19"))+t._s(1==t.pageType?"500":"1000")+"USDT，")]),n("v-uni-view",{staticClass:"oneText"},[t._v("2."+t._s(t.$t("node20")))]),n("v-uni-view",{staticClass:"oneText"},[t._v("3."+t._s(t.$t("node21"))+t._s(1==t.pageType?"1":"2")+"%"+t._s(t.$t("node22")))])],1)],1),n("v-uni-view",{staticClass:"btnBox"},[t.Approve?n("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.clickBuy.apply(void 0,arguments)}}},[t._v(t._s(t.$t("node7")))]):n("v-uni-view",{staticClass:"btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.FApprove.apply(void 0,arguments)}}},[t._v(t._s(t.$t("Approve")))])],1)],1),n("w-loading",{ref:"loading",attrs:{text:"",mask:"true",click:"false"}})],1)},a=[]},f2f1:function(t,e,n){"use strict";n.r(e);var i=n("ee01"),a=n("1f5b");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("bd02");var s=n("828b"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"2820ea20",null,!1,i["a"],void 0);e["default"]=r.exports},f4e6:function(t,e,n){var i=n("1ef1");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("967d").default;a("00e6ff38",i,!0,{sourceMap:!1,shadowMode:!1})},f723:function(t,e,n){t.exports=n.p+"static/logoInfo.png"},fd12:function(t,e,n){var i=n("c86c");e=i(!1),e.push([t.i,".content[data-v-2820ea20]{width:100%;height:100%;background-image:url(/static/bg.png);background-size:100% 100%;min-height:100vh;box-sizing:border-box}.content .footerPosition[data-v-2820ea20]{position:absolute;bottom:0;width:99.5%}.content .buyNodeBox[data-v-2820ea20]{padding:0 %?40?%;margin-top:%?40?%}.content .buyNodeBox .withTitle[data-v-2820ea20]{display:flex;justify-content:space-between;margin-bottom:%?60?%;align-items:center}.content .buyNodeBox .withTitle uni-text[data-v-2820ea20]{font-family:Microsoft YaHei;font-weight:700;font-size:%?34?%;color:#fff}.content .buyNodeBox .withTitle uni-image[data-v-2820ea20]{width:%?40?%;height:%?40?%}.content .buyNodeBox .buyBox[data-v-2820ea20]{padding:%?45?% %?36?%;background-image:url(/static/buyNodeBg.png);background-size:100% 100%}.content .buyNodeBox .buyBox .inputBox[data-v-2820ea20]{height:%?77?%;line-height:%?77?%;padding:0 %?30?%;background-image:url(/static/nodeInputBg.png);background-size:100% 100%;display:flex;align-items:center}.content .buyNodeBox .buyBox .inputBox uni-text[data-v-2820ea20]{font-family:Microsoft YaHei;font-weight:700;font-size:%?26?%;color:#fff}.content .buyNodeBox .buyBox .inputBox uni-image[data-v-2820ea20]{width:%?40?%;height:%?40?%;margin:0 %?20?%}.content .buyNodeBox .buyBox .tips[data-v-2820ea20]{margin-top:%?22?%;font-family:Microsoft YaHei;font-weight:400;font-size:%?24?%;color:#b1b1b1}.content .buyNodeBox .buyBox .tipsList[data-v-2820ea20]{margin-top:%?68?%}.content .buyNodeBox .buyBox .tipsList .oneText[data-v-2820ea20]{font-family:Microsoft YaHei;font-weight:400;font-size:%?24?%;color:#fff;margin-bottom:%?20?%}.content .buyNodeBox .btnBox[data-v-2820ea20]{display:flex;justify-content:center;margin-top:%?80?%;margin-bottom:%?20?%}.content .buyNodeBox .btnBox .btn[data-v-2820ea20]{width:%?373?%;height:%?84?%;line-height:%?84?%;text-align:center;background-image:url(/static/withBtn.png);background-size:100% 100%;font-family:Microsoft YaHei;font-weight:400;font-size:%?32?%;color:#040404}",""]),t.exports=e}}]);